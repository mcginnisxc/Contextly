<script>
  function addPair() {
    /* …your existing code… */
  }

  function generateLink() {
    const urls = [], questions = [];
    document.querySelectorAll('.pair').forEach(div => {
      let u = div.querySelector('.url').value.trim();
      if (!u) return; 
      if (!u.match(/^https?:\/\//)) u = 'https://' + u;
      urls.push(u);
      questions.push(div.querySelector('.question').value.trim() || '');
    });
    if (!urls.length) {
      alert('Add at least one URL.');
      return;
    }

    const payload = { urls, questions };
    const data = encodeURIComponent(JSON.stringify(payload));

    // ASSUME viewer.html is in the same folder:
    const link = `${window.location.origin}${window.location.pathname
      .replace(/index\.html$/, '')}viewer.html?data=${data}`;

    document.getElementById('output').innerHTML = `
      <h3>Your Session Link:</h3>
      <a href="${link}" target="_blank">${link}</a>
    `;
  }

  // initialize…
  addPair();
</script>
